---
import remarkParse from "remark-parse";
import { unified } from "unified";
import { fetchPost } from "../esa-utils/fetch";
import { parseFaqs } from "../esa-utils/faq-parser";
import Layout from "../layouts/Layout.astro";
import Footer from "../components/footer.astro";

const faqPost = await fetchPost(import.meta.env.ESA_FAQ_NUMBER);
const faqNodes = unified().use(remarkParse).parse(faqPost.body_md);
const faqs = parseFaqs(faqNodes);
console.dir(faqs);
---

<Layout pageTitle="よくある質問">
  <div class="container">
    <h1>よくある質問</h1>
    <dl>
      {
        faqs.map((faq) => (
          <div class="faq-item">
            <dt>{faq.question}</dt>
            <dd set:html={faq.answerHtml} />
          </div>
        ))
      }
    </dl>
  </div>
  <Footer showTopLink={true} />
</Layout>

<style>
  dt {
    font-size: 1.3rem;
    font-weight: bold;
  }
  dt::before {
    content: "Q. ";
  }
  .container {
    padding: 16px;
    width: 620px;
    margin: 8px auto;
  }
  .faq-item {
    padding: 0.5em 1em;
    margin: 2em 0;
    background: #fff;
    border: solid 3px #60d398; /*線*/
    border-radius: 10px; /*角の丸み*/
  }
  @media screen and (max-width: 768px) {
    .faq-item {
      width: 100%;
    }
    dd {
      margin-left: 8px;
    }
    .container {
      width: 100%;
    }
  }
</style>
